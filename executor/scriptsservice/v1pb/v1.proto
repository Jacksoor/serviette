syntax = "proto3";

package kobun4.executor.scripts.v1;

option go_package = "v1pb";

message Context {
    string bridge_name = 1;
    string mention = 2;
    map<string, string> extra = 3;
}

message ExecuteRequest {
    bytes executing_account_handle = 1;
    bytes executing_account_key = 2;

    bytes script_account_handle = 3;

    string name = 4;
    Context context = 5;
}

message ExecuteResponse {
    bool ok = 1;
    bytes stdout = 2;
    bytes stderr = 3;
    int64 executing_account_transfers = 4;
    int64 billing_account_transfers = 5;
    int64 usage_cost = 6;
    bool unified_billing = 7;
}

service Scripts {
    rpc Execute(ExecuteRequest) returns (ExecuteResponse) { }
}
