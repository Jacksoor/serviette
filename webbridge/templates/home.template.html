{{define "title"}}{{.AccountHandle}}{{end}}

{{define "body"}}
<p>Hi, and welcome to your account page.</p>
<dl>
    <dt>Account Handle</dt>
    <dd><samp>{{.AccountHandle}}</samp></dd>

    <dt>Account Key (keep this secret!)</dt>
    <dd><span class="secret"><samp>{{.AccountKey}}</samp></span></dd>

    <dt>Balance</dt>
    <dd>{{.Balance}}</dd>
</dl>

<h2>Scripts Owned <small><a href="/scripts">view all scripts</a></small></h2>
<p>
    You own the following scripts.
</p>
<ul>
{{range $_, $name := .ScriptNames}}
    <li><a href="/scripts/{{$.AccountHandle}}/{{$name}}"><samp>{{$name}}</samp></a></li>
{{end}}
</ul>

<form method="POST" action="/scripts/{{.AccountHandle}}">
    <input type="text" name="name">
    <button type="submit">Create new script</button>
</form>

<h2>Deeds Owned</h2>
<p>
    You own the following deeds.
    <table>
        <tr>
            <th>Type</th>
            <th>Name</th>
            <th>Content</th>
            <th>Lease expires in</th>
            <th>Renew</th>
            <th>Delete</th>
        </tr>

        {{range $_, $deed := .Deeds}}
        <tr>
            <td>{{$deed.Info.Type}}</td>
            <td>
                <samp>{{$deed.Info.Name}}</samp>
            </td>
            <td>
                <form method="POST" action="/deeds/{{$deed.Info.Type}}/{{$deed.Info.Name}}">
                    <input type="text" name="content" value="{{$deed.Content}}"><button type="submit">Update</button>
                </form>
            </td>
            <td>{{prettyTime $deed.Info.ExpiryTimeUnix}}</td>
            <td>
                <form method="POST" action="/deeds/{{$deed.Info.Type}}/{{$deed.Info.Name}}/renew">
                    <input type="number" name="periods" value="1"> periods <button type="submit">Renew</button>
                </form>
            </td>
            <td>
                <form method="POST" action="/deeds/{{$deed.Info.Type}}/{{$deed.Info.Name}}/delete">
                    <button type="submit">Delete</button>
                </form>
            </td>
        </tr>
        {{end}}
    </table>
</p>

<h3>Market Prices</h3>
<p>
    These are the most recent market prices for deeds.
    <table>
        <tr>
            <th>Type</th>
            <th>Price</th>
            <th>Lease period</th>
        </tr>

        {{range $_, $def := .DeedTypes}}
        <tr>
            <td>{{$def.Name}}</td>
            <td>{{$def.Price}}</td>
            <td>{{prettyDuration $def.DurationSeconds}}</td>
        </tr>
        {{end}}
    </table>
</p>

<form method="POST" action="/deeds">
    <dl>
        <dt><label for="deed-type">Type</label></dt>
        <dd>
            <select id="deed-type" name="type">
                <option disabled selected></option>
                {{range $_, $def := .DeedTypes}}
                    <option value="{{$def.Name}}">{{$def.Name}}</td>
                {{end}}
            </select>
        </dd>

        <dt><label for="deed-name">Name</label></dt>
        <dd><input id="deed-name" type="text" name="name"></dd>

        <dt><label for="deed-content">Content</label></dt>
        <dd><input id="deed-content" type="text" name="content"></dd>

        <dt><label for="deed-periods">Periods</label></dt>
        <dd><input id="deed-periods" type="number" name="periods" value="1"></dd>
    </dl>
    <button type="submit">Purchase deed</button>
</form>

{{end}}
